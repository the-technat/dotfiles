#!{{ trimAll "\"" .shell }}

if ! command -v "chsh" > /dev/null; then
  shell=$(getent passwd {{ .chezmoi.username }} | awk -F : '{print $NF}')
  if [ ${shell} != *"zsh"* ]; then
    if ! command -v "sudo" > /dev/null; then
      echo "changing shell can be done using sudo (password-less)"
      sudo chsh -s $(command -v zsh) {{ .chezmoi.username }}
    else
      echo "changing shell requires your password"
      chsh -s $(command -v zsh) {{ .chezmoi.username }}
    fi
  fi
fi